---
title: "Kintoneãƒ—ãƒ©ã‚°ã‚¤ãƒ³é–‹ç™ºç’°å¢ƒã®æ§‹ç¯‰ï¼ˆWebpack + Tailwindcss + DaisyUI + Vue.jsï¼‰"
emoji: "ğŸ“"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["kintone", "webpack","tailwindcss", "daisyui", "vuejs"]
published: false
publication_name: "karabiner_inc"
---

## ã¯ã˜ã‚ã«
ã“ã®è¨˜äº‹ã§ã¯ã€Kintoneã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³é–‹ç™ºç’°å¢ƒã«ã¤ã„ã¦ã€
Webpackã¨æœ€è¿‘å€‹äººçš„ã«ãƒãƒã£ã¦ã„ã‚‹Tailwindcss + daisyUI + Vue.jsã®æ§‹æˆã§
ä½œã‚Šä¸Šã’ã‚‹ãŸã‚ã«å®Ÿè¡Œã—ãŸã‚³ãƒãƒ³ãƒ‰åŠã³è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®è¨˜éŒ²ã§ã™ã€‚

é †ç•ªã«å®Ÿè¡Œã—ã¦ã„ããŸã„å ´åˆã¯[ã“ã¡ã‚‰ã®ã‚¹ã‚¯ãƒ©ãƒƒãƒ—](https://zenn.dev/akira07/scraps/4af2849926bcbe)ã‚’å‚ç…§ãã ã•ã„ã€‚

ä»¥ä¸‹ã®è¨˜äº‹ã§ã¯ã€å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã‚’ä¸€æ‹¬ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ããŸã‚ã€è©³ã—ã„èª¬æ˜ã¯çœãã¾ã™ã€‚


## äº‹å‰æº–å‚™
1. Node.jsã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

asdfã‚’ä½¿ã£ãŸä¾‹ï¼š

```shell:shell
asdf plugin-update --all
asdf install nodejs latest
```

2. ãƒ—ãƒ©ã‚°ã‚¤ãƒ³é–‹ç™ºç”¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ

```shell:shell
npx create-kintone-plugin@latest <plugin_name>
```

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³åç§°ã‚„èª¬æ˜ãªã©ã‚’å…¥åŠ›ã—ã¾ã™ã€‚
ã“ã“ã§ã¯ã€ãƒ¢ãƒã‚¤ãƒ«ãƒšãƒ¼ã‚¸ã®ã‚µãƒãƒ¼ãƒˆã¯Noã§é€²ã‚ã‚‹ã®ã§é©å®œèª­ã¿æ›¿ãˆã¦ãã ã•ã„ã€‚

@kintone/plugin-uploaderã‚’ä½¿ã„ã¾ã™ã‹ï¼Ÿã¯ã€ŒYesã€ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚

3. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç§»å‹•

```shell:shell
cd <plugin_name>
```

ä»¥é™ã¯ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã§å…¨ã¦æ“ä½œã‚’è¡Œã„ã¾ã™ã€‚
gitã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã¯ `git init` ã—ã¦ãŠã„ã¦ãã ã•ã„ã€‚

ã¾ãŸã€åˆ©ç”¨ã™ã‚‹Node.jsã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã—ãŸæ–¹ãŒè¤‡æ•°äººã§é–‹ç™ºã™ã‚‹éš›ã«ã¯è‰¯ã„ã¨æ€ã†ã®ã§ã€æŒ‡å®šã—ã¦ãŠãã¾ã™ã€‚

asdfã®ä¾‹ï¼š

```shell:shell
asdf local nodejs latest
```

## å„ç¨®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å°å…¥

```shell:shell
npm install --save-dev @kintone/webpack-plugin-kintone-plugin \
                       webpack \
                       webpack-cli \
                       dotenv-cli \
                       tailwindcss \
                       daisyui \
                       css-minimizer-webpack-plugin \
                       mini-css-extract-plugin \
                       webpack-remove-empty-scripts \
                       css-loader \
                       postcss-loader \
                       autoprefixer \
                       vue-loader \
                       vue-template-compiler \
                       @kintone/dts-gen
```

```shell:shell
npm install vue
```

## æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã®ç§»å‹•ãªã©

```shell:shell
mkdir plugin
mv src/manifest.json src/css src/html src/image plugin/
```

## æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆãªã©

```shell:shell
touch webpack.config.js
```

```js:webpack.config.js
const path = require('path');
const KintonePlugin = require('@kintone/webpack-plugin-kintone-plugin');
const CssMinimizerPlugin = require('css-minimizer-webpack-plugin');
const MiniCssExtractPlugin = require('mini-css-extract-plugin');
const WebpackRemoveEmptyScriptsPlugin = require('webpack-remove-empty-scripts');
const { VueLoaderPlugin } = require('vue-loader');
const webpack = require('webpack');

module.exports = {
  // webpack ã§ãƒãƒ³ãƒ‰ãƒ«ã™ã‚‹ js ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹
  entry: {
    'js/desktop': './src/js/desktop.js',
    // 'js/mobile': './src/js/mobile.js',
    'js/config': './src/js/config.js',
    'css/index': './src/css/index.css',
  },
  // webpack ã§ãƒãƒ³ãƒ‰ãƒ«ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒå‡ºåŠ›ã™ã‚‹å…ˆã‚’æŒ‡å®šã™ã‚‹
  output: {
    path: path.resolve(__dirname, 'plugin'),
    filename: '[name].js',
  },
  // ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ³ã‚°ã«å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã‚’è¨­å®šã™ã‚‹
  plugins: [
    new KintonePlugin({
      manifestJSONPath: './plugin/manifest.json',
      privateKeyPath: './private.ppk',
      pluginZipPath: './dist/plugin.zip',
    }),
    new MiniCssExtractPlugin({
      filename: '[name].css',
    }),
    new WebpackRemoveEmptyScriptsPlugin(),
    new VueLoaderPlugin(),
    new webpack.DefinePlugin({
      __VUE_OPTIONS_API__: false,
      __VUE_PROD_DEVTOOLS__: true,
    }),
  ],
  module: {
    rules: [
      {
        test: /\.css$/,
        use: [MiniCssExtractPlugin.loader, 'css-loader', 'postcss-loader'],
      },
      {
        test: /\.vue$/,
        loader: 'vue-loader',
      },
    ]
  },
  optimization: {
    minimizer: [new CssMinimizerPlugin()],
  },
};
```


```shell:shell
touch .env
```

```:.env
KINTONE_BASE_URL=<kintoneã®URL>
KINTONE_USERNAME=<ãƒ­ã‚°ã‚¤ãƒ³å>
KINTONE_PASSWORD=<ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰>
```

```shell:shell
npx tailwindcss init -p
```

```js:tailwind.config.js
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: ['./plugin/**/*.{html,js,vue}'],
  theme: {
    extend: {},
  },
  plugins: [
    require('daisyui'),
  ],
  darkMode: 'class',
  daisyui: {
    themes: ['light'],
  }
}
```

```shell:shell
mkdir -p src/css
touch src/css/index.css
```

```css:src/css/index.css
@tailwind base;
@tailwind components;
@tailwind utilities;
```

gitã‚’ä½¿ã£ã¦ã‚‹äººç”¨


```shell:shell
touch .gitignore
mkdir -p plugin/js
touch plugin/js/.gitkeep
```

```:.gitignore
/node_modules/
/.env
/plugin/js/*
!/plugin/js/.gitkeep
/plugin/css/index.css
/private.ppk
```


## è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®æ›¸ãæ›ãˆ

```diff json:package.json
  "scripts": {
-   "start": "node scripts/npm-start.js",
-   "develop": "npm run build -- --watch",
-   "build": "kintone-plugin-packer --ppk private.ppk --out dist/plugin.zip src",
+   "start": "npm run develop",
+   "develop": "webpack --mode development --watch",
+   "build": "webpack --mode production",
    "lint": "eslint src",
-   "upload": "kintone-plugin-uploader dist/plugin.zip --watch --waiting-dialog-ms 3000"
+   "upload": "dotenv -- kintone-plugin-uploader dist/plugin.zip --watch --waiting-dialog-ms 3000"
  },
```

```diff json:plugin/manifest.json
  {
    ...
    "desktop": {
      "js": [
-       "https://js.cybozu.com/jquery/3.3.1/jquery.min.js",
        "js/desktop.js"
      ],
      "css": [
-       "css/51-modern-default.css",
        "css/desktop.css"
      ]
    },
    "icon": "image/icon.png",
    "config": {
      "html": "html/config.html",
      "js": [
-       "https://js.cybozu.com/jquery/3.3.1/jquery.min.js",
        "js/config.js"
      ],
      "css": [
-       "css/51-modern-default.css",
-       "css/config.css"
+       "css/index.css"
      ],
      ...
    },
    ...
  }
```

## Vue.jsã®åˆ©ç”¨

Vue.jsã‚’ä½¿ã†ãŸã‚ã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’ã—ã¦ã„ãã¾ã™ã€‚

```html:plugin/condig.html
<section class="settings">
    <div id="app"></div>
</section>
```

```shell:shell
mkdir -p src/js/content
touch src/js/config.vue
```

```vue:src/js/config.vue
<script setup>
import {inject} from 'vue';

const PLUGIN_ID = inject('PLUGIN_ID');

</script>

<template>
  <h2 class="text-3xl mb-4">plugin_name ãƒ—ãƒ©ã‚°ã‚¤ãƒ³</h2>
</template>

<style scoped>

</style>
```

```js:src/js/config.js
import { createApp } from 'vue';
import configApp from './config.vue';

(async function (PLUGIN_ID) {
  createApp(configApp)
    .provide('PLUGIN_ID', PLUGIN_ID)
    .mount('#app');
})(kintone.$PLUGIN_ID);
```

`.provide('PLUGIN_ID', PLUGIN_ID)` ã¯ã€vueãƒ•ã‚¡ã‚¤ãƒ«ã¸ãƒ—ãƒ©ã‚°ã‚¤ãƒ³IDã‚’æ¸¡ã™ãŸã‚è¨˜è¼‰ã—ã¦ã¾ã™ã€‚

ã‚ã¨ã¯ãŠå¥½ããªãƒ©ã‚¤ãƒ–ãƒ©ãƒªãªã©ã‚’åˆ©ç”¨ã—ã¦è¨­å®šãƒšãƒ¼ã‚¸ã‚’æ§‹ç¯‰ã—ã¦ã„ãå½¢ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚
srcãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®æ§‹æˆã«ã¤ã„ã¦ã‚‚ç‰¹ã«è§¦ã‚Œã¦ã„ãªã„ã®ã§ã€ãƒãƒ¼ãƒ å†…ãªã©ã§ãŠæ±ºã‚ãã ã•ã„ã€‚

## ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œ

```shell:shell
npm run start
```

ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ã‚’æ¤œçŸ¥ã—ã¦ã€éƒ½åº¦ãƒ“ãƒ«ãƒ‰ã—ã¦ãã‚Œã¾ã™ã€‚
ï¼ˆdistãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®plugin.zipãŒæ›´æ–°ã•ã‚Œã‚‹ï¼‰


```shell:shell
npm run upload
```

ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€plugin.zipã®å¤‰æ›´ã‚’æ¤œçŸ¥ã—ã¦ã€kintoneã«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã‚Œã¾ã™ã€‚


é–‹ç™ºä¸­ã¯ã€2ã¤ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œä¸­ã«ã—ã¦ãŠãã¨ã€ç·¨é›†å†…å®¹ã‚’ã™ãã‚¢ãƒƒãƒ—ã—ã¦ãã‚Œã‚‹ã®ã§æ¥½ã§ã™ã€‚
ï¼ˆkintoneç”»é¢ã®ãƒªãƒ­ãƒ¼ãƒ‰ã¯å¿…è¦ã§ã™ï¼‰

ãŠã‚ã‚Š
